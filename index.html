<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Print: Filament & Products Manager</title>

    <!-- Firebase App (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <!-- Firebase Realtime Database (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>

    
	<link rel="stylesheet" href="style.css">
	
</head>
<body>
	<!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ / –°–±—Ä–æ—Å–∞ -->
	<div id="loginOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #1e293b; z-index: 99999; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white;">
        
        <div id="authContainer" style="background: white; padding: 30px; border-radius: 12px; width: 340px; color: #333; box-shadow: 0 10px 25px rgba(0,0,0,0.5); position: relative;">
            
            <!-- 1. –§–æ—Ä–º–∞ –í–•–û–î–ê -->
            <form id="loginForm" onsubmit="event.preventDefault();">
                <h2 style="margin-top: 0; color: #1e40af; text-align: center; margin-bottom: 20px;">–í—Ö–æ–¥</h2>
                <div style="margin-bottom: 15px;">
                    <label style="font-size: 12px; font-weight: bold; display: block; margin-bottom: 5px;">Email</label>
                    <input type="email" id="emailInput" class="auth-input" required autocomplete="username">
                </div>
                <div style="margin-bottom: 10px;">
                    <label style="font-size: 12px; font-weight: bold; display: block; margin-bottom: 5px;">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="passwordInput" class="auth-input" required autocomplete="current-password">
                </div>
                <div style="text-align: right; margin-bottom: 20px;">
                    <a href="#" onclick="showAuthForm('reset')" style="font-size: 12px; color: #1e40af; text-decoration: none;">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
                </div>
                <button type="submit" id="loginBtn" class="auth-btn">–í–æ–π—Ç–∏</button>
                <div style="margin-top: 15px; text-align: center; font-size: 13px;">
                    –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" onclick="showAuthForm('register')" style="color: #1e40af; font-weight: bold;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>
            </form>

            <!-- 2. –§–æ—Ä–º–∞ –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò -->
            <form id="registerForm" onsubmit="event.preventDefault();" class="hidden">
                <h2 style="margin-top: 0; color: #15803d; text-align: center; margin-bottom: 20px;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                <div style="margin-bottom: 15px;">
                    <label style="font-size: 12px; font-weight: bold; display: block; margin-bottom: 5px;">Email</label>
                    <input type="email" id="regEmailInput" class="auth-input" required autocomplete="username">
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="font-size: 12px; font-weight: bold; display: block; margin-bottom: 5px;">–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤.)</label>
                    <input type="password" id="regPasswordInput" class="auth-input" required autocomplete="new-password" minlength="6">
                </div>
                <button type="submit" id="regBtn" class="auth-btn" style="background: #15803d;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <div style="margin-top: 15px; text-align: center; font-size: 13px;">
                    –ï—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" onclick="showAuthForm('login')" style="color: #1e40af; font-weight: bold;">–í–æ–π—Ç–∏</a>
                </div>
            </form>

            <!-- 3. –§–æ—Ä–º–∞ –°–ë–†–û–°–ê –ü–ê–†–û–õ–Ø -->
            <form id="resetForm" onsubmit="event.preventDefault();" class="hidden">
                <h2 style="margin-top: 0; color: #ea580c; text-align: center; margin-bottom: 10px;">–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</h2>
                <p style="font-size: 12px; color: #666; margin-bottom: 20px; text-align: center;">–í–≤–µ–¥–∏—Ç–µ email, —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–±—Ä–æ—Å–∞.</p>
                <div style="margin-bottom: 20px;">
                    <label style="font-size: 12px; font-weight: bold; display: block; margin-bottom: 5px;">Email</label>
                    <input type="email" id="resetEmailInput" class="auth-input" required>
                </div>
                <button type="submit" id="resetBtn" class="auth-btn" style="background: #ea580c;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
                <div style="margin-top: 15px; text-align: center; font-size: 13px;">
                    <a href="#" onclick="showAuthForm('login')" style="color: #1e40af; font-weight: bold;">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫–æ –≤—Ö–æ–¥—É</a>
                </div>
            </form>

            <p id="authMessage" style="color: #dc2626; font-size: 13px; margin-top: 15px; text-align: center; display: none; line-height: 1.4;"></p>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è Email -->
        <div id="verificationWait" style="background: white; padding: 30px; border-radius: 12px; width: 340px; color: #333; text-align: center; display: none;">
            <h2 style="color: #1e40af; margin-top: 0;">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ Email</h2>
            <p style="margin: 20px 0; font-size: 14px; line-height: 1.5;">
                –ù–∞ –≤–∞—à—É –ø–æ—á—Ç—É <strong id="verifyEmailSpan"></strong> –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–∏—Å—å–º–æ —Å–æ —Å—Å—ã–ª–∫–æ–π.
                <br><br>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ, –∞ –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.
            </p>
            <button onclick="window.location.reload()" class="auth-btn" style="margin-bottom: 10px;">–Ø –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª, –≤–æ–π—Ç–∏</button>
            <button onclick="resendVerification()" id="resendBtn" class="btn-secondary" style="width: 100%; justify-content: center;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ</button>
            <div style="margin-top: 15px;">
                <a href="#" onclick="firebase.auth().signOut().then(()=>window.location.reload())" style="font-size: 12px; color: #64748b;">–í—ã–π—Ç–∏ / –°–º–µ–Ω–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</a>
            </div>
        </div>

		<p style="margin-top: 20px; font-size: 12px; color: #94a3b8;">3D Filament Manager v4.3 Multi-User</p>
	</div>


    
    <!-- Header -->
    <div class="header">
        <div style="display: flex; align-items: flex-end; gap: 16px;">
            <img src="data:image/png;base64,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" style="height: 52px; border-radius: 4px; display: block;">
            <div style="display: flex; flex-direction: column; gap: 4px;">
                <div class="header-title" style="line-height: 1; display: flex; align-items: baseline; gap: 8px;">
                    <span>3D Print: Filament & Products Manager</span>
                    <small style="font-size: 14px; color: var(--color-text-light); font-weight: 400;">v5.0</small>
                </div>
                <div class="header-info" style="line-height: 1;">–°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ —Ñ–∏–ª–∞–º–µ–Ω—Ç–∞ –∏ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π</div>
            </div>
        </div>
        <div class="header-info" id="currentDate"></div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <button class="menu-item active" data-page="dashboard">üìä –î–∞—à–±–æ—Ä–¥</button>
            <button class="menu-item" data-page="filament">üßµ –§–∏–ª–∞–º–µ–Ω—Ç</button>
            <button class="menu-item" data-page="products">üì¶ –ò–∑–¥–µ–ª–∏—è</button>
            <button class="menu-item" data-page="writeoff">üìí –°–ø–∏—Å–∞–Ω–∏–µ</button>
            <button class="menu-item" data-page="reports">üìà –û—Ç—á—ë—Ç—ã</button>
            <button class="menu-item" data-page="references">‚öôÔ∏è –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</button>

            <div class="sidebar-divider"></div>
            <div class="sidebar-section-title">–ë—ç–∫–∞–ø—ã</div>
            <button class="menu-item" id="exportBtn" title="–°–∫–∞—á–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ JSON">üíæ –°–∫–∞—á–∞—Ç—å –±–∞–∑—É</button>
            <button class="menu-item" id="importBtn" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å –±–∞–∑—É –∏–∑ JSON">üìÇ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
            <input type="file" id="importFile" style="display: none;">
            
            <div style="margin-top: auto; font-size: 11px; color: #64748b; text-align: center; padding-top: 20px;">
                ¬© <span id="copyrightYear"></span> Artem Kiyashko Project
            </div>
        </div>

        <!-- Content -->
        <div class="content">
 
            <div id="dashboard" class="page active">
                <div class="page-title">–î–∞—à–±–æ—Ä–¥</div>
                
                 <div class="dashboard-row">
                    <div class="card dashboard-counter-card">
                        <div class="counter-title">–ö–∞—Ç—É—à–µ–∫ —Å —Ñ–∏–ª–∞–º–µ–Ω—Ç–æ–º</div>
                        <div class="counter-value" id="dashFilamentCount">0</div>
                        <div id="dashFilamentWarnings" class="dashboard-warnings hidden"></div>
                    </div>
                    <div class="card dashboard-table-card">
                        <div class="card-header">–§–∏–ª–∞–º–µ–Ω—Ç –≤ –Ω–∞–ª–∏—á–∏–∏ (–í—Å–µ)</div>
                        <div class="table-container">
                            <table id="dashFilamentTable">
                                <thead><tr><th>–¶–≤–µ—Ç</th><th>–î–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏</th><th>–ë—Ä–µ–Ω–¥</th><th>–¢–∏–ø –ø–ª–∞—Å—Ç–∏–∫–∞</th><th>–û—Å—Ç–∞—Ç–æ–∫ (–º)</th><th>–¶–µ–Ω–∞</th></tr></thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="dashboard-row">
                    <div class="card dashboard-counter-card">
                        <div class="counter-title">–ò–∑–¥–µ–ª–∏–π / –í –Ω–∞–ª–∏—á–∏–∏</div>
                        <div class="counter-value-group">
                            <div class="counter-value" id="dashProductCountRecord">0</div>
                            <div class="counter-divider">/</div>
                            <div class="counter-value" id="dashProductCountStock">0</div>
                        </div>
                    </div>
                    <div class="card dashboard-table-card">
                        <div class="card-header">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è (10)</div>
                        <div class="table-container">
                            <table id="dashProductTable">
                                <thead>
                                    <tr>
                                        <th style="width: 30%;">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                        <th style="width: 200px;">–î–∞—Ç–∞</th>
                                        <th style="width: 300px;">–¶–≤–µ—Ç</th>
                                        <th>–û—Å—Ç–∞—Ç–æ–∫</th>
                                        <th style="width: 250px;">–°—Ç–∞—Ç—É—Å</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="dashboard-row">
                    <div class="card dashboard-counter-card">
                        <div class="counter-title">–ü—Ä–æ–¥–∞–Ω–æ</div>
                        <div class="counter-value" id="dashSoldCount">0</div>
                    </div>
                    <div class="card dashboard-table-card">
                        <div class="card-header">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–¥–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è (5)</div>
                        <div class="table-container">
                            <table id="dashSalesTable">
                                <thead>
                                    <tr>
                                        <th style="width: 30%;">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                        <th style="width: 200px;">–î–∞—Ç–∞</th>
                                        <th style="width: 140px;">–ö–æ–ª-–≤–æ</th>
                                        <th style="width: 160px;">–¶–µ–Ω–∞ (—à—Ç)</th>
                                        <th>–°—É–º–º–∞</th>
                                        <th style="width: 250px;">–°—Ç–∞—Ç—É—Å</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="dashboard-row">
                    <div class="card dashboard-counter-card">
                        <div class="counter-title">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
                        <div class="counter-value" id="dashUsedCount">0</div>
                    </div>
                    <div class="card dashboard-table-card">
                        <div class="card-header">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è (5)</div>
                        <div class="table-container">
                            <table id="dashUsedTable">
                                <thead>
                                    <tr>
                                        <th style="width: 30%;">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                        <th style="width: 200px;">–î–∞—Ç–∞</th>
                                        <th style="width: 140px;">–ö–æ–ª-–≤–æ</th>
                                        <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                                        <th style="width: 250px;">–°—Ç–∞—Ç—É—Å</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="dashboard-row">
                    <div class="card dashboard-counter-card">
                        <div class="counter-title">–ó–∞–±—Ä–∞–∫–æ–≤–∞–Ω–æ</div>
                        <div class="counter-value" id="dashDefectiveCount">0</div>
                    </div>
                    <div class="card dashboard-table-card">
                        <div class="card-header">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–±—Ä–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è (5)</div>
                        <div class="table-container">
                            <table id="dashDefectiveTable">
                                <thead>
                                    <tr>
                                        <th style="width: 30%;">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                        <th style="width: 200px;">–î–∞—Ç–∞</th>
                                        <th style="width: 140px;">–ö–æ–ª-–≤–æ</th>
                                        <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                                        <th style="width: 250px;">–°—Ç–∞—Ç—É—Å</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
   
            <div id="filament" class="page">
                <div class="page-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª–∞–º–µ–Ω—Ç–æ–º</div>
                <div class="controls">
                    <div class="controls-left">
                        <button id="addFilamentBtn" class="btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç—É—à–∫—É</button>
                        <div class="search-container">
							<input type="text" class="search-input" id="filamentSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ ID –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é...">
							<span class="search-clear">&times;</span>
						</div>
                    </div>
                </div>
                <div class="card">
                   <div style="display: flex; gap: var(--spacing); align-items: center; margin-bottom: var(--spacing); flex-wrap: wrap;">
						<!-- –§–∏–ª—å—Ç—Ä –ù–∞–ª–∏—á–∏—è -->
						<div style="display: flex; align-items: center; gap: 8px;">
							<label style="margin: 0;">–ù–∞–ª–∏—á–∏–µ:</label>
							<select id="filamentStatusFilter" style="padding: 0 12px; border: 1px solid var(--color-border); border-radius: var(--radius); font-size: 14px; width: 180px; height: 38px;">
								<option value="">‚Äî –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã ‚Äî</option>
							</select>
						</div>

						<!-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -->
						<div style="display: flex; align-items: center; gap: 8px;">
							<label style="margin: 0;">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ:</label>
							<select id="filamentSortBy" style="padding: 0 12px; border: 1px solid var(--color-border); border-radius: var(--radius); font-size: 14px; width: 180px; height: 38px;">
								<option value="date-desc">–î–∞—Ç–µ –ø–æ–∫—É–ø–∫–∏ (–Ω–æ–≤—ã–µ)</option>
								<option value="date-asc">–î–∞—Ç–µ –ø–æ–∫—É–ø–∫–∏ (—Å—Ç–∞—Ä—ã–µ)</option>
								<option value="availability">–ù–∞–ª–∏—á–∏—é</option>
								<option value="brand">–ë—Ä–µ–Ω–¥—É</option>
								<option value="color">–¶–≤–µ—Ç—É</option>
								<option value="id">ID</option>
								<option value="length">–û—Å—Ç–∞—Ç–∫—É</option>
								<option value="price">–¶–µ–Ω–µ –∫–∞—Ç—É—à–∫–∏</option>
							</select>
						</div>

						<!-- –ö–Ω–æ–ø–∫–∞ –°–±—Ä–æ—Å–∏—Ç—å (–≤—ã—Å–æ—Ç–∞ 38px) -->
						<button id="resetFilamentFiltersBtn" class="btn-secondary" style="padding: 0 16px; font-size: 14px; height: 38px; display: flex; align-items: center; justify-content: center;">–°–±—Ä–æ—Å–∏—Ç—å</button>

						<!-- –ö–Ω–æ–ø–∫–∞ –ü–µ—Ä–µ—Å—á–µ—Ç–∞ (–ø—Ä–∏–∂–∞—Ç–∞ –≤–ø—Ä–∞–≤–æ, –≤—ã—Å–æ—Ç–∞ 38px) -->
						<button id="recalculateFilamentBtn" class="btn-secondary" title="–ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—Ö–æ–¥ —Ñ–∏–ª–∞–º–µ–Ω—Ç–∞ –ø–æ –≤—Å–µ–º –∏–∑–¥–µ–ª–∏—è–º" style="padding: 0 12px; font-size: 18px; height: 38px; margin-left: auto; display: flex; align-items: center; justify-content: center;">
							üîÑ
						</button>
					</div>


                    <div class="table-container">
                        <table id="filamentsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–î–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏</th>
                                    <th>–ù–∞–ª–∏—á–∏–µ</th>
                                    <th>–¶–≤–µ—Ç</th>
                                    <th>–ë—Ä–µ–Ω–¥</th>
                                    <th>–¢–∏–ø –ø–ª–∞—Å—Ç–∏–∫–∞</th>
                                    <th>–î–ª–∏–Ω–∞ (–º)</th>
                                    <th>–û—Å—Ç–∞—Ç–æ–∫ (–º)</th>
                                    <th>–ò–∑—Ä–∞—Å—Ö. (–º)</th>
                                    <th>–ò–∑—Ä–∞—Å—Ö. (–≥)</th>
                                    <th>–¶–µ–Ω–∞ (‚ÇΩ)</th>
                                    <th>–†—ã–Ω–æ–∫ (‚ÇΩ)</th>
                                    <th></th>
                                    <th class="text-center">–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="products" class="page">
                <div class="page-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–¥–µ–ª–∏—è–º–∏</div>
                <div class="controls">
                    <div class="controls-left">
                        <button id="addProductBtn" class="btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏–∑–¥–µ–ª–∏–µ</button>
                        <div class="search-container">
							<input type="text" class="search-input" id="productSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é...">
							<span class="search-clear">&times;</span>
						</div>
                    </div>
                    <div class="controls-right">
                        <button id="addProductPageWriteoffBtn" class="btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–ø–∏—Å–∞–Ω–∏–µ</button>
                    </div>
                </div>
                <div class="card">
                    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px; flex-wrap: wrap;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <label style="margin: 0;">–ù–∞–ª–∏—á–∏–µ:</label>
                            <select id="productAvailabilityFilter" style="padding: 8px 12px; border: 1px solid var(--color-border); border-radius: var(--radius); font-size: 14px; width: 180px;">
                                <option value="">‚Äî –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã ‚Äî</option>
                                <option value="InStock">–í –Ω–∞–ª–∏—á–∏–∏</option>
                                <option>–í –Ω–∞–ª–∏—á–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é</option>
                                <option>–í –Ω–∞–ª–∏—á–∏–∏ —á–∞—Å—Ç–∏—á–Ω–æ</option>
                                <option>–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</option>
                                <option>–ë—Ä–∞–∫</option>
                            </select>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <label style="margin: 0;">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ:</label>
							<select id="productSortBy" style="padding: 8px 12px; border: 1px solid var(--color-border); border-radius: var(--radius); font-size: 14px; width: 180px;">
                                <option value="systemId-desc">–°–∏—Å—Ç–µ–º–Ω—ã–π ID (–Ω–æ–≤—ã–µ)</option>
                                <option value="systemId-asc">–°–∏—Å—Ç–µ–º–Ω—ã–π ID (—Å—Ç–∞—Ä—ã–µ)</option>
                                <option value="date-desc">–î–∞—Ç–∞ (–Ω–æ–≤—ã–µ)</option>
                                <option value="date-asc">–î–∞—Ç–∞ (—Å—Ç–∞—Ä—ã–µ)</option>
								<option value="name">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</option>
                                <option value="length">–î–ª–∏–Ω–∞</option>
								<option value="weight">–í–µ—Å</option>
								<option value="quantity">–ö–æ–ª-–≤–æ</option>
                            </select>
                        </div>
                        <button id="resetProductFiltersBtn" class="btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="showProductChildren" checked style="cursor: pointer; width: 18px; height: 18px;">
                            <label for="showProductChildren" style="cursor: pointer; font-size: 14px; margin: 0;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —á–∞—Å—Ç–∏ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö</label>
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="productsTable">
								<thead>
									<tr>
										<th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
										<th style="width: 2px;"></th>
										<th style="width: 100px;">–î–∞—Ç–∞</th>
										<th>–§–∏–ª–∞–º–µ–Ω—Ç</th>
										<th>–í—Ä–µ–º—è (—á:–º)</th> 
										<th>–í–µ—Å (–≥)</th>
										<th>–î–ª–∏–Ω–∞ (–º)</th>
										<th>–ö–æ–ª-–≤–æ</th>
										<th>–û—Å—Ç–∞—Ç–æ–∫</th>
										<th>–°–µ–±–µ—Å—Ç. –∑–∞ 1 —à—Ç.<br><small>(—Ä—ã–Ω–æ–∫)</small></th>
										<th>–°–µ–±–µ—Å—Ç. –∑–∞ 1 —à—Ç.<br><small>(—Ç–æ—á–Ω–∞—è)</small></th>
										<th style="text-align: left;">–°—Ç–∞—Ç—É—Å</th>
										<th class="text-center"></th>
										<th class="text-center">–î–µ–π—Å—Ç–≤–∏—è</th>
									</tr>
								</thead>
                            <tbody></tbody>
                        </table>                        
					</div>
                </div>
            </div>

            <div id="writeoff" class="page">
                <div class="page-title">–°–ø–∏—Å–∞–Ω–∏–µ</div>
                <div class="controls">
                    <div class="controls-left">
                        <button id="addWriteoffBtn" class="btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–ø–∏—Å–∞–Ω–∏–µ</button>
                        <div class="search-container">
							<input type="text" class="search-input" id="writeoffSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ ID...">
							<span class="search-clear">&times;</span>
						</div>
                    </div>
                </div>
                <div class="card">
                    <div style="display: flex; gap: var(--spacing); align-items: center; margin-bottom: var(--spacing); flex-wrap: wrap;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <label style="margin: 0;">–¢–∏–ø —Å–ø–∏—Å–∞–Ω–∏—è:</label>
                            <select id="writeoffTypeFilter" style="padding: 8px 12px; border: 1px solid var(--color-border); border-radius: var(--radius); font-size: 14px; width: 180px;">
                                <option value="">‚Äî –í—Å–µ —Ç–∏–ø—ã ‚Äî</option>
                                <option value="–ü—Ä–æ–¥–∞–∂–∞">–ü—Ä–æ–¥–∞–∂–∞</option>
                                <option value="–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</option>
                                <option value="–ë—Ä–∞–∫">–ë—Ä–∞–∫</option>
                            </select>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <label style="margin: 0;">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ:</label>
                            <select id="writeoffSortBy" style="padding: 8px 12px; border: 1px solid var(--color-border); border-radius: var(--radius); font-size: 14px; width: 180px;">
                                <option value="systemId-desc">–°–∏—Å—Ç–µ–º–Ω—ã–π ID (–Ω–æ–≤—ã–µ)</option>
                                <option value="systemId-asc">–°–∏—Å—Ç–µ–º–Ω—ã–π ID (—Å—Ç–∞—Ä—ã–µ)</option>
                                <option value="date-desc">–î–∞—Ç–∞ (–Ω–æ–≤—ã–µ)</option>
                                <option value="date-asc">–î–∞—Ç–∞ (—Å—Ç–∞—Ä—ã–µ)</option>
                                <option value="product">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</option>
                                <option value="total">–°—É–º–º–∞</option>
                            </select>
                        </div>
                        <button id="resetWriteoffFiltersBtn" class="btn-secondary" style="padding: 0 16px; font-size: 14px; height: 38px; display: flex; align-items: center; justify-content: center;">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>

                    <div class="table-container">
                         <table id="writeoffTable">
                            <thead>
                                <tr>
                                    <th style="width: 110px;">–î–∞—Ç–∞</th>
                                    <th>–°–∏—Å—Ç–µ–º–Ω—ã–π ID</th>
                                    <th>–ò–∑–¥–µ–ª–∏–µ</th>
                                    <th>–¢–∏–ø —Å–ø–∏—Å–∞–Ω–∏—è</th>
                                    <th>–°–µ–±–µ—Å—Ç. –∑–∞ 1 —à—Ç.<br><small>(—Ç–æ—á–Ω–∞—è)</small></th>
                                    <th>–ö–æ–ª-–≤–æ</th>
                                    <th>–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ (—à—Ç)</th>
                                    <th>–°—É–º–º–∞</th>
                                    <th>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</th>
                                    <th class="text-center">–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="reports" class="page">
                <div class="page-title">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç</div>
                
                <div class="report-controls">
                    <div class="form-group" style="margin-bottom:0; width: 150px;">
                        <label>–ü–µ—Ä–∏–æ–¥ —Å:</label>
                        <input type="date" id="reportStartDate">
                    </div>
                    <div class="form-group" style="margin-bottom:0; width: 150px;">
                        <label>–ø–æ:</label>
                        <input type="date" id="reportEndDate">
                    </div>
                    <button class="btn-primary" id="generateReportBtn">üîÑ –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç</button>
                </div>

                <div class="card">
                    <div class="table-container">
                         <table class="report-table" id="financialTable">
                            <thead>
                                <tr>
                                    <th class="col-title" style="text-align:left; padding-left:16px;">–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å –ø—Ä–∏–±—ã–ª–∏</th>
                                    <th><span class="tooltip-container" style="border-bottom:1px dashed #94a3b8;">–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ñ–∏–ª.<span class="tooltip-text">–°—É–º–º–∞ –ø–æ–ª–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–∞—Ç—É—à–µ–∫ (–ø–æ —Ä–µ–∞–ª—å–Ω–æ–π —Ü–µ–Ω–µ), –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</span></span></th>
                                    <th><span class="tooltip-container" style="border-bottom:1px dashed #94a3b8;">–°–µ–±–µ—Å—Ç. –∏—Å–ø/–±—Ä–∞–∫<span class="tooltip-text">–°—É–º–º–∞—Ä–Ω–∞—è —Ä–µ–∞–ª—å–Ω–∞—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–ø–∏—Å–∞–Ω–∏–π ("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ", "–ë—Ä–∞–∫") + –∏–∑–¥–µ–ª–∏—è —Å –ø—Ä–∏–∑–Ω–∞–∫–æ–º "–ë—Ä–∞–∫"</span></span></th>
                                    <th><span class="tooltip-container" style="border-bottom:1px dashed #94a3b8;">–í—ã—Ä—É—á–∫–∞<span class="tooltip-text">–û–±—â–∞—è —Å—É–º–º–∞ –ø—Ä–æ–¥–∞–∂ (–≤—ã—Ä—É—á–∫–∞) –∑–∞ –ø–µ—Ä–∏–æ–¥</span></span></th>
                                    <th><span class="tooltip-container" style="border-bottom:1px dashed #94a3b8;">–°–µ–±–µ—Å—Ç. –ø—Ä–æ–¥–∞–Ω–æ<span class="tooltip-text">–°—É–º–º–∞—Ä–Ω–∞—è —Ä–µ–∞–ª—å–Ω–∞—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π</span></span></th>
                                    <th class="col-profit">–ü—Ä–∏–±—ã–ª—å, ‚ÇΩ</th>
                                    <th class="col-ros"><span class="tooltip-container" style="border-bottom:1px dashed #94a3b8;">ROS %<span class="tooltip-text tooltip-left-up">–†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∂:<br>(–ü—Ä–∏–±—ã–ª—å / –í—ã—Ä—É—á–∫–∞) * 100%</span></span></th>
                                    <th class="col-markup"><span class="tooltip-container" style="border-bottom:1px dashed #94a3b8;">–ö —Å–µ–±–µ—Å—Ç. %<span class="tooltip-text tooltip-left-up">–ù–∞—Ü–µ–Ω–∫–∞:<br>(–ü—Ä–∏–±—ã–ª—å / –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∂) * 100%</span></span></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
			
            <div id="references" class="page">
                <div class="page-title">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</div>
                
                <div class="form-row">
                    <div class="card">
                        <div class="card-header">–ë—Ä–µ–Ω–¥—ã —Ñ–∏–ª–∞–º–µ–Ω—Ç–∞</div>
                        <div style="margin-bottom: var(--spacing);">
                            <input type="text" id="newBrand" placeholder="–ù–æ–≤—ã–π –±—Ä–µ–Ω–¥..." style="margin-bottom: 8px;">
                            <button id="addBrandBtn" class="btn-primary" style="width: 100%;">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                        <div id="brandsList" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>

                    <div class="card">
                        <div class="card-header">–¶–≤–µ—Ç–∞</div>
                        <div style="margin-bottom: var(--spacing);">
                            <input type="text" id="newColor" placeholder="–ù–æ–≤—ã–π —Ü–≤–µ—Ç..." style="margin-bottom: 8px;">
                            <input type="color" id="newColorCode" value="#ffffff" style="width: 100%; height: 40px; border: 1px solid var(--color-border); cursor: pointer; margin-bottom: 8px;">
                            <button id="addColorBtn" class="btn-primary" style="width: 100%;">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                        <div id="colorsList" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="card">
                        <div class="card-header">–¢–∏–ø—ã —Ñ–∏–ª–∞–º–µ–Ω—Ç–∞</div>
                        <div style="margin-bottom: var(--spacing);">
                            <input type="text" id="newFilamentType" placeholder="–ù–æ–≤—ã–π —Ç–∏–ø..." style="margin-bottom: 8px;">
                            <button id="addFilamentTypeBtn" class="btn-primary" style="width: 100%;">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                        <div id="filamentTypeList" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>

                    <div class="card">
                        <div class="card-header">–°—Ç–∞—Ç—É—Å—ã —Ñ–∏–ª–∞–º–µ–Ω—Ç–∞</div>
                        <div style="margin-bottom: var(--spacing);">
                            <input type="text" id="newFilamentStatus" placeholder="–ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å..." style="margin-bottom: 8px;">
                            <button id="addFilamentStatusBtn" class="btn-primary" style="width: 100%;">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                        <div id="filamentStatusList" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="card">
                        <div class="card-header">–ü—Ä–∏–Ω—Ç–µ—Ä—ã</div>
                        <div style="display: flex; gap: var(--spacing); margin-bottom: var(--spacing);">
                            <input type="text" id="newPrinterModel" placeholder="–ú–æ–¥–µ–ª—å –ø—Ä–∏–Ω—Ç–µ—Ä–∞...">
                            <input type="number" id="newPrinterPower" placeholder="–ú–æ—â–Ω–æ—Å—Ç—å (–∫–í—Ç)" step="0.1">
                        </div>
                        <button id="addPrinterBtn" class="btn-primary" style="width: 100%; margin-bottom: var(--spacing);">–î–æ–±–∞–≤–∏—Ç—å</button>
                        <div id="printersList" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>
                    <div class="card">
                        <div class="card-header">–°—Ç–æ–∏–º–æ—Å—Ç—å —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏</div>
                        <div style="display: flex; gap: var(--spacing); margin-bottom: var(--spacing);">
                            <div class="form-group" style="flex:1; margin:0;">
                                <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ (–≥–≥–≥–≥-–º–º-–¥–¥)</label>
                                <input type="date" id="newElectricityDate">
                            </div>
                            <div class="form-group" style="flex:1; margin:0;">
                                <label>–°—Ç–æ–∏–º–æ—Å—Ç—å 1 –∫–í—Ç (‚ÇΩ)</label>
                                <input type="number" id="newElectricityCost" step="0.01">
                            </div>
                        </div>
                        <button id="addElectricityCostBtn" class="btn-primary" style="width: 100%; margin-bottom: var(--spacing);">–î–æ–±–∞–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ</button>
                        <div id="electricityCostList" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Modals -->
    <div id="filamentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header-simple-custom">
                <div class="modal-header-title">–î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª–∞–º–µ–Ω—Ç</div>
                <div id="filamentValidationMessage" class="validation-message hidden" style="position: absolute; bottom: 8px; left: 24px; margin: 0; padding: 0;">–ù–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã</div>
                <div id="filamentUniqueIdMessage" class="validation-message hidden" style="position: absolute; bottom: 8px; left: 24px; margin: 0; padding: 0;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º</div>
            </div>
            
            <div class="modal-body">
                <div class="form-section">
                    <div class="form-section-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                    <div class="form-row-3">
                        <div class="form-group"><label>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π ID:</label><input type="text" id="filamentCustomId" placeholder="–ë–µ–ª—ã–π - 1"></div>
                        <div class="form-group"><label>–ù–∞–ª–∏—á–∏–µ:</label><select id="filamentAvailability"></select></div>
                        <div class="form-group"><label>–î–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏:</label><input type="date" id="filamentDate" value=""></div>
                    </div>
                    <div class="form-group"><label>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª–∞–º–µ–Ω—Ç–∞:</label><input type="text" id="filamentName" placeholder="PLA 1.75mm"></div>
                    <div class="form-group"><label>–°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä / –∑–∞–∫–∞–∑:</label><input type="url" id="filamentLink" placeholder="https://..."></div>
                    <div class="form-row-3">
                        <div class="form-group"><label>–ë—Ä–µ–Ω–¥:</label><select id="filamentBrand"></select></div>
                        <div class="form-group"><label>–¢–∏–ø –ø–ª–∞—Å—Ç–∏–∫–∞:</label><select id="filamentType"></select></div>
                        <div class="form-group">
                            <label>–¶–≤–µ—Ç:</label>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span class="color-swatch" id="filamentColorPreview" style="background:#ffffff;width:24px;height:24px;border-radius:4px;border:1px solid var(--color-border);flex-shrink:0;"></span>
                                <select id="filamentColor" style="flex:1;"></select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
                    <div class="form-row-3">
                        <div class="form-group"><label class="label-with-tooltip">–¶–µ–Ω–∞ —ç—Ç–æ–π –∫–∞—Ç—É—à–∫–∏ (‚ÇΩ):<span class="tooltip-container"><span class="tooltip-icon">‚Ñπ</span><span class="tooltip-text" id="priceTooltip">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: -</span></span></label><input type="number" id="filamentActualPrice" step="0.01"></div>
                        <div class="form-group"><label>–°–µ–±–µ—Å—Ç. –∑–∞ –≥—Ä–∞–º–º (‚ÇΩ):</label><div class="calc-field" id="actualCostPerGramCalc">0.00 ‚ÇΩ/–≥</div></div>
                        <div class="form-group"><label>–°–µ–±–µ—Å—Ç. –∑–∞ –º–µ—Ç—Ä (‚ÇΩ):</label><div class="calc-field" id="actualCostPerMeterCalc">0.00 ‚ÇΩ/–º</div></div>
                    </div>
                    <div class="form-row-3">
                        <div class="form-group"><label>–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ —Ä—ã–Ω–∫–∞ (‚ÇΩ):</label><input type="number" id="filamentAvgPrice" step="0.01"></div>
                        <div class="form-group"><label>–†—ã–Ω–æ–∫. —Å–µ–±–µ—Å—Ç. –∑–∞ –≥—Ä–∞–º–º (‚ÇΩ):</label><div class="calc-field" id="avgCostPerGramCalc">0.00 ‚ÇΩ/–≥</div></div>
                        <div class="form-group"><label>–†—ã–Ω–æ–∫. —Å–µ–±–µ—Å—Ç. –∑–∞ –º–µ—Ç—Ä (‚ÇΩ):</label><div class="calc-field" id="avgCostPerMeterCalc">0.00 ‚ÇΩ/–º</div></div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">–û—Å—Ç–∞—Ç–æ–∫</div>
                    <div class="form-row-3">
                        <div class="form-group"><label class="label-with-tooltip">–í–µ—Å –∫–∞—Ç—É—à–∫–∏ (–≥):<span class="tooltip-container"><span class="tooltip-icon">‚Ñπ</span><span class="tooltip-text" id="weightTooltip">–ì—Ä–∞–º–º–æ–≤ –≤ –º–µ—Ç—Ä–µ: -</span></span></label><input type="number" id="filamentWeight" value="1000" step="1"></div>
                        <div class="form-group"><label>–ò–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ (–≥):</label><div class="calc-field" id="weightUsedCalc">0 –≥</div></div>
                        <div class="form-group"><label>–û—Å—Ç–∞—Ç–æ–∫ (–≥):</label><div class="calc-field" id="weightRemainingCalc">0 –≥</div></div>
                    </div>
                    <div class="form-row-3">
                        <div class="form-group"><label>–î–ª–∏–Ω–∞ –∫–∞—Ç—É—à–∫–∏ (–º):</label><input type="number" id="filamentLength" value="330" step="1"></div>
                        <div class="form-group"><label>–ò–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ (–º):</label><div class="calc-field" id="lengthUsedCalc">0.0 –º</div></div>
                        <div class="form-group"><label>–û—Å—Ç–∞—Ç–æ–∫ (–º):</label><div class="calc-field" id="lengthRemainingCalc">0.0 –º</div></div>
                    </div>
                </div>

                <div class="form-section"><div class="form-group"><label>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</label><textarea id="filamentNote" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea></div></div>
            </div>

            <div class="modal-footer">
                <button id="closeFilamentModalBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                <button id="saveFilamentBtn" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∑–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="productModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
			<div class="modal-header-custom">
			  <div class="modal-header-title">–î–æ–±–∞–≤–∏—Ç—å –∏–∑–¥–µ–ª–∏–µ</div>
			  <div class="header-right-elements"><label class="checkbox-label" style="flex-direction: row-reverse;"><input type="checkbox" id="productDefective">–ë—Ä–∞–∫ –∏–∑–¥–µ–ª–∏—è</label></div>
              <div id="productValidationMessage" class="validation-message hidden" style="position: absolute; bottom: 8px; left: 24px; margin: 0; padding: 0;">–ù–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã</div>
              <div class="system-id-block" style="position: absolute; bottom: 8px; right: 24px; font-size: 12px; color: #64748b;">–°–∏—Å—Ç–µ–º–Ω—ã–π ID: <span id="productSystemId">-</span></div>
			</div>

			<div class="header-divider"></div>

            <div class="modal-body">
                <div class="form-section-title" style="margin-top: 0; display: flex; justify-content: space-between; align-items: center;">
                    <span>–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø</span>
                    <div id="productAllPartsCreatedContainer" style="display: none;"><label class="checkbox-label" style="margin: 0; font-size: 12px; font-weight: normal; color: var(--color-text); gap: 6px;"><input type="checkbox" id="productAllPartsCreated" style="transform: translateY(1px);">–í—Å–µ —á–∞—Å—Ç–∏ –∏–∑–¥–µ–ª–∏—è —Å–æ–∑–¥–∞–Ω—ã</label></div>
                </div>

                <div class="modal-layout-grid">
                    <div>
                        <div class="form-group" style="margin-bottom: 4px;">
                            <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–¥–µ–ª–∏—è:</label>
                            <div class="image-upload-container"><div class="image-upload-placeholder" id="imagePlaceholder"><span class="image-upload-icon">üì∑</span><span>–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</span></div><img id="productImagePreview" class="product-image-preview" src="" alt="Preview"><button class="btn-delete-image" id="btnDeleteImage">üóëÔ∏è</button><input type="file" id="productImageInput" accept="image/*" style="display: none;"></div>
                        </div>
                    </div>

					<div class="modal-basic-info-grid">
                        <div class="form-group"><label>–î–∞—Ç–∞ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:</label><input type="date" id="productDate"></div>
                        <div class="form-group"><label>–°—Ç–∞—Ç—É—Å –Ω–∞–ª–∏—á–∏—è:</label><div class="calc-field" id="productAvailabilityField">–í –Ω–∞–ª–∏—á–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é</div></div>
                        <div class="form-group"><label>–¢–∏–ø –∏–∑–¥–µ–ª–∏—è:</label><select id="productType"><option value="–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ">–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ</option><option value="–°–æ—Å—Ç–∞–≤–Ω–æ–µ">–°–æ—Å—Ç–∞–≤–Ω–æ–µ</option><option value="–ß–∞—Å—Ç—å —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ">–ß–∞—Å—Ç—å —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ</option></select></div>
                        <div class="form-group">
                            <div style="display: flex; gap: 10px; width: 100%;">
                                <div style="flex: 1;"><label>–ö–æ–ª-–≤–æ (—à—Ç):</label><input type="number" id="productQuantity" value="1" min="1"></div>
                                <div style="flex: 1;"><label>–û—Å—Ç–∞—Ç–æ–∫ (—à—Ç):</label><div class="calc-field" id="productStockCalc">1</div></div>
                            </div>
                        </div>
                        <div class="form-group" style="grid-column: span 2;"><label id="labelProductName">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏—è:</label><input type="text" id="productName" placeholder="–ö—É–±–∏–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"></div>
                        <div id="productParentGroup" class="form-group hidden" style="grid-column: span 2;"><label>–°–æ—Å—Ç–∞–≤–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –¥–∞–Ω–Ω–∞—è —á–∞—Å—Ç—å –∏–∑–¥–µ–ª–∏—è:</label><select id="productParent"></select></div>
                        <div class="form-group" id="productLinkFieldContainer" style="grid-column: span 2;"><label for="productLink">–°—Å—ã–ª–∫–∞ –Ω–∞ –º–æ–¥–µ–ª—å:</label><input type="text" id="productLink" placeholder="https://"></div>
                    </div>
                </div>
				
                <div id="fileUploadSection" class="form-group" style="margin-top: 16px; margin-bottom: 24px;">
                    <div style="display: flex; align-items: flex-end; margin-bottom: 4px;">
                        <div style="width: 240px; display: flex; justify-content: space-between; align-items: center;">
                            <label style="margin:0">–§–∞–π–ª—ã –º–æ–¥–µ–ª–∏</label>
                            <span style="font-size: 10px; color: #94a3b8;" id="fileCountLabel">0 / 5</span>
                        </div>
                    </div>
                    <div class="file-section-row">
                        <div class="file-upload-btn-wrapper"><button type="button" class="btn-secondary" id="btnAddFile">üìé –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª</button><input type="file" id="productFileInput" style="display: none;"></div>
                        <div id="fileListContainer" class="file-list-container"></div>
                    </div>
                </div>

                <div id="materialSection" class="form-section">
                    <div class="form-section-title">–ú–∞—Ç–µ—Ä–∏–∞–ª</div>
                    <div class="form-row-3">
                        <div class="form-group"><label>–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ñ–∏–ª–∞–º–µ–Ω—Ç:</label><select id="productFilament"></select></div>
                        <div class="form-group" id="productColorGroup">
                            <label>–¶–≤–µ—Ç:</label>
                            <div style="display:flex;align-items:center;gap:8px;min-height:38px;"><span class="color-swatch" id="productColorSwatch" style="background:#ffffff;width:24px;height:24px;border-radius:4px;border:1px solid var(--color-border);flex-shrink:0;"></span><div class="calc-field" style="padding:10px 12px;flex:1;background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius);font-size:14px;color:var(--color-text-light);min-height:18px;display:flex;align-items:center;"><span id="productColorName">‚Äî</span></div></div>
                        </div>
                        <div class="form-group"><label>–ü—Ä–∏–Ω—Ç–µ—Ä:</label><select id="productPrinter"></select></div>
                    </div>
                </div>

               <div class="form-section">
                    <div class="form-section-title">–í—Ä–µ–º—è –∏ —Ä–µ—Å—É—Ä—Å</div>
                    <div class="form-row-3">
                        <div class="form-group"><label class="label-with-tooltip">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—á–∞—Ç–∏ (–ß–ß:MM):<span class="tooltip-container"><span class="tooltip-icon">‚Ñπ</span><span class="tooltip-text" id="energyCostTooltip">–°—Ç–æ–∏–º–æ—Å—Ç—å 1 –∫–í—Ç: -</span></span></label><div style="display:flex;gap:8px;"><div style="flex:1;"><input type="number" id="productPrintTimeHours" min="0" placeholder="—á"></div><div style="flex:1;"><input type="number" id="productPrintTimeMinutes" min="0" max="59" placeholder="–º"></div></div></div>
                        <div class="form-group"><label class="label-with-tooltip">–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –≤–µ—Å —Ñ–∏–ª. (–≥):<span class="tooltip-container"><span class="tooltip-icon">‚Ñπ</span><span class="tooltip-text" id="costPerGramTooltip">–°–µ–±–µ—Å—Ç. –∑–∞ –≥—Ä–∞–º–º —Ä—ã–Ω–æ–∫/—Ä–µ–∞–ª—å–Ω–∞—è: - / -</span></span></label><input type="number" id="productWeight" step="0.1"></div>
						<div class="form-group"><label class="label-with-tooltip">–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –¥–ª–∏–Ω–∞ —Ñ–∏–ª. (–º):<span class="tooltip-container"><span class="tooltip-icon">‚Ñπ</span><span class="tooltip-text tooltip-top-left" id="costPerMeterTooltip">–°–µ–±–µ—Å—Ç. –∑–∞ –º–µ—Ç—Ä —Ä—ã–Ω–æ–∫/—Ä–µ–∞–ª—å–Ω–∞—è: - / -</span></span></label><input type="number" id="productLength" step="0.1"></div>
                    </div>
                </div>

                <div class="form-section">
					<div class="form-section-title" style="display: flex; justify-content: space-between; align-items: center;">
						<div>–°—Ç–æ–∏–º–æ—Å—Ç—å<span id="compositeCostNote" class="hidden" style="font-weight: 400; color: var(--color-text-light); margin-left: 8px;">(—Å—É–º–º–∞—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –≤—Å–µ–º —á–∞—Å—Ç—è–º)</span></div>
						<div class="tooltip-container"><span style="font-size: 11px; font-weight: 400; text-transform: none; cursor: help; border-bottom: 1px dashed var(--color-text-light);">–ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞—Å—á–µ—Ç</span><span class="tooltip-text tooltip-top-left" id="costsDetailTooltip" style="width: 450px; text-align: left; line-height: 1.4;">–ó–¥–µ—Å—å –±—É–¥—É—Ç —Ñ–æ—Ä–º—É–ª—ã...</span></div>
					</div>
                    <div class="form-row-3">
                        <div class="form-group"><label>–°—Ç–æ–∏–º. —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ –∏–∑–¥–µ–ª–∏–µ</label><div class="calc-field" id="productEnergyCostCalc" style="text-align:left;">0.00</div></div>
                        <div class="form-group"><label class="label-with-tooltip">–†—ã–Ω–æ–∫. –°—Ç–æ–∏–º. —Ñ–∏–ª. –ø–æ –≤–µ—Å—É<span class="tooltip-container"><span class="tooltip-icon">‚Ñπ</span><span class="tooltip-text" id="filamentCostByWeightTooltip">–° —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é: -</span></span></label><div class="calc-field" id="productFilamentCostByWeightCalc" style="text-align:left;">0.00</div></div>
                        <div class="form-group"><label class="label-with-tooltip">–†—ã–Ω–æ–∫. –°—Ç–æ–∏–º. —Ñ–∏–ª. –ø–æ –¥–ª–∏–Ω–µ<span class="tooltip-container"><span class="tooltip-icon">‚Ñπ</span><span class="tooltip-text tooltip-top-left" id="filamentCostByLengthTooltip">–° —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é: -</span></span></label><div class="calc-field" id="productFilamentCostByLengthCalc" style="text-align:left;">0.00</div></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group"><label class="label-with-tooltip">–†—ã–Ω–æ–∫. —Å–µ–±–µ—Å—Ç. –∏–∑–¥–µ–ª–∏—è<span class="tooltip-container"><span class="tooltip-icon">‚Ñπ</span><span class="tooltip-text" id="productCostActualTooltip">–° —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é: -</span></span></label><div class="calc-field" id="productCostMarketCalc" style="text-align:left;">0.00</div></div>
                        <div class="form-group"><label class="label-with-tooltip">–†—ã–Ω–æ–∫. —Å–µ–±–µ—Å—Ç. –∑–∞ 1 —à—Ç.<span class="tooltip-container"><span class="tooltip-icon">‚Ñπ</span><span class="tooltip-text" id="productCostPerUnitActualTooltip">–° —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é: -</span></span></label><div class="calc-field" id="productCostMarketPerUnitCalc" style="text-align:left;">0.00</div></div>
                    </div>
                </div>

                <div class="form-section hidden" id="childrenTableGroup">
                    <div class="form-section-title">–ß–∞—Å—Ç–∏ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ –∏–∑–¥–µ–ª–∏—è</div>
                    <div class="table-container"><table id="childrenTable"><thead><tr><th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th><th>–¶–≤–µ—Ç</th><th>–ö–æ–ª-–≤–æ</th><th>–í–µ—Å (–≥)</th><th>–î–ª–∏–Ω–∞ (–º)</th><th>–†—ã–Ω. —Å–µ–±–µ—Å—Ç.</th><th>–°–µ–±–µ—Å—Ç.</th></tr></thead><tbody></tbody></table></div>
                </div>

                <div class="form-section"><div class="form-group"><label>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</label><textarea id="productNote" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea></div></div>
            </div>

            <div class="modal-footer" style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <button id="btnWriteOffProduct" class="btn-primary" onclick="initiateWriteOff()" style="display: none;">–°–ø–∏—Å–∞—Ç—å</button>
                </div>
                <div style="display: flex; gap: var(--spacing);">
                    <button id="closeProductModalBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                    <button id="saveProductBtn" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∑–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>

        </div>
    </div>

    <div id="writeoffModal" class="modal">
        <div class="modal-content">
            <div class="modal-header-simple-custom">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <div class="modal-header-title">–î–æ–±–∞–≤–∏—Ç—å —Å–ø–∏—Å–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏—è</div>
                    <div class="writeoff-sale-summary hidden" id="writeoffTotalSummary" style="background:transparent; border:none; padding:0; display: flex; gap: 16px; font-size:13px; align-items: center;"><span>–ü–†–û–î–ê–ñ–ê: <strong id="writeoffTotalAmount">0.00 ‚ÇΩ</strong></span><span>–ü–†–ò–ë–´–õ–¨: <strong id="writeoffTotalProfit">0.00 ‚ÇΩ</strong></span></div>
                </div>
                <div id="writeoffValidationMessage" class="validation-message hidden" style="position: absolute; bottom: 8px; left: 24px; margin: 0; padding: 0;">–ù–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã</div>
				<div class="system-id-block" style="position: absolute; bottom: 8px; right: 24px; font-size: 12px; color: #64748b;">–°–∏—Å—Ç–µ–º–Ω—ã–π ID: <span id="writeoffSystemId">-</span></div>
            </div>
            
            <div class="modal-body">
                <div class="form-section">
                    <div class="form-section-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                    <div class="form-row-3">
                        <div class="form-group" style="grid-column: span 2;"><label>–¢–∏–ø —Å–ø–∏—Å–∞–Ω–∏—è:*</label><select id="writeoffType"><option value="–ü—Ä–æ–¥–∞–∂–∞">–ü—Ä–æ–¥–∞–∂–∞</option><option value="–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</option><option value="–ë—Ä–∞–∫">–ë—Ä–∞–∫</option></select></div>
                        <div class="form-group"><label>–î–∞—Ç–∞ —Å–ø–∏—Å–∞–Ω–∏—è:*</label><input type="date" id="writeoffDate"></div>
                    </div>
                </div>
                <div id="writeoffItemsContainer"></div>
                <button id="addWriteoffItemBtn" class="btn-add-section">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏–∑–¥–µ–ª–∏–µ –∫ —Å–ø–∏—Å–∞–Ω–∏—é</button>
                <div class="form-section"><div class="form-group"><label>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</label><textarea id="writeoffNote" style="min-height: 60px;" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea></div></div>
            </div>

            <div class="modal-footer">
                <button id="closeWriteoffModalBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                <button id="saveWriteoffBtn" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∑–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

	<div id="globalImageTooltip"><img id="globalImageTooltipImg" src=""></div>


    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤–∞—à —Å–∫—Ä–∏–ø—Ç -->
    <script src="script.js?v=7"></script>

</body>
</html>
